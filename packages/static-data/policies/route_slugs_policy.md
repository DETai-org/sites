# Route Slugs Policy (Localized URL Slugs)

## 1) Цель
Зафиксировать правила для **локализованных slug-ов маршрута** (route slugs) для таксономии
(rubrics / categories / keywords), чтобы получить **максимум SEO** и хорошую UX-читабельность URL
на всех 5 языках, при этом сохраняя **стабильность идентификаторов** и возможность безопасных изменений.

---

## 2) Термины
### 2.1. `id` (stable id)
Стабильный идентификатор сущности (например `rubric:shadow-and-light`).
- используется в данных, связях, фильтрах, frontmatter, ссылках внутри системы;
- **не локализуется**;
- **никогда не меняется** после того, как сущность введена.

### 2.2. `routeSlugs` (localized route slugs)
Локализованные значения slug, которые используются **в URL**.
- меняются в зависимости от языка;
- являются человекочитаемыми;
- предназначены для SEO и UX.

---

## 3) Поддерживаемые языки
Фиксированный список языков:

`ru`, `en`, `de`, `fi`, `cn`

Правило: у каждого элемента таксономии, который публикуется на сайте, должны быть заполнены
`routeSlugs` для **всех 5 языков**. Черновиков в репозитории не храним.

---

## 4) Где хранится
`routeSlugs` хранится внутри `packages/static-data/taxonomy.base.json` в каждой сущности таксономии.

---

## 5) Формат данных
Каждый элемент таксономии (rubric/category/keyword) имеет:

- `id: string` (stable id)
- `routeSlugs: { ru, en, de, fi, cn }` (локализованные route slugs)
- `labels: { ru, en, de, fi, cn }`
- `description: { ru, en, de, fi, cn }`
- `definition` (optional)

Пример:

```json
{
  "id": "rubric:shadow-and-light",
  "routeSlugs": {
    "ru": "ten-i-svet",
    "en": "shadow-and-light",
    "de": "schatten-und-licht",
    "fi": "varjo-ja-valo",
    "cn": "yin-yu-yang"
  },
  "labels": { "ru": "Тень и Свет", "en": "Shadow and Light", "de": "...", "fi": "...", "cn": "..." },
  "description": { "ru": "...", "en": "...", "de": "...", "fi": "...", "cn": "..." }
}
```

---

## 6) Правила route slug (как строка)

### 6.1. Общие правила

* только `a-z`, `0-9`, дефис `-`
* kebab-case
* без пробелов, подчёркиваний и спецсимволов
* без trailing `-`
* длина: разумная, предпочтительно до 60 символов

### 6.2. Язык `ru`

* предпочтительно транслитерация в латиницу (для единообразия URL)
* допускается умеренная адаптация для читабельности (не буквальная транслит-помойка)

### 6.3. Язык `cn`

* если используется латинизация (pinyin) — только латиница и дефисы
* если применяется свой стандарт — он должен быть единым для всех китайских route slugs

---

## 7) Уникальность

### 7.1. Уникальность внутри языка и типа

В рамках одного языка route slug должен быть уникален внутри одного типа сущностей:

* `rubrics`: все `routeSlugs.ru` уникальны среди rubrics, и так для каждого языка
* `categories`: все `routeSlugs.ru` уникальны среди categories, и так для каждого языка
* `keywords`: по необходимости (если keywords имеют публичные страницы; если нет — можно не требовать)

Примечание:

* одинаковые значения route slug допускаются между разными типами, если они не конфликтуют в URL-схеме.
  (например, если маршруты разные: `/rubrics/...` и `/categories/...`)

---

## 8) Изменение route slug и история

### 8.1. Когда можно менять route slug

`routeSlugs.{lang}` можно менять, если:

* улучшили SEO/читабельность;
* исправили ошибку;
* изменили формулировку в языке.

### 8.2. Что нельзя менять

* `id` менять нельзя никогда.
* нельзя “переназначать” существующий `id` под другой смысл.

### 8.3. История route slug (обязательна при изменениях)

Если `routeSlugs.{lang}` изменился для сущности, должна быть сохранена история для редиректов.

Формат истории — простой и явный (файл/структура определится отдельно), но правило одно:
**старый URL должен 301-редиректить на новый URL**.

---

## 9) SEO-правила (минимум)

Для страниц таксономии (rubrics/categories) обязательно:

* `hreflang` между языковыми версиями одной и той же сущности (`id` общий)
* `canonical` выбранной основной версии (стратегия canonical определяется SEO-политикой сайта)

---

## 10) Связь с постами

Эта политика регулирует **только таксономию** (rubrics/categories/keywords).

Посты сейчас могут оставаться в модели:

* **один slug-папка** на все языки (`posts/<slug>/<lang>.md`)

Локализация slug постов — отдельный шаг и отдельная политика, потому что требует миграции структуры хранения и маршрутизации. ❗❗

