# Централизованные данные публикаций

Эта директория собирает единую схему и данные научных материалов DET. Все страницы и списки публикаций читают информацию только отсюда, поэтому для добавления новой статьи достаточно:

1. положить PDF в `public/documents/research/` (с учётом подкаталогов `articles/`, `theses/`, `dissertations/`);
2. добавить объект в [`publications.data.ts`](./publications.data.ts) согласно типам из [`types.ts`](./types.ts).

## Стандарт страниц публикаций (SEO + UX v1.0)
- Тип `Publication` хранит весь контент страницы: `seoLead`, полный `abstract`, `keywords`, `citation`, `doi`, `pdfs`, `externalLinks` (текст кнопок формируется как `Открыть в {label}` для реальных источников).
 - Тип `Publication` хранит весь контент страницы: `seoLead`, полный `abstract`, `keywords`, `citation`, `doi`, `pdfs`, `externalLinks` (текст кнопок формируется как `Открыть в {label}` для реальных источников).
 - `externalLinks` используются только для реальных точек доступа к тексту (страница журнала / eLIBRARY / репозиторий препринта); DOI хранится строго в поле `doi` и не попадает в `externalLinks`.
- Верх страницы строго: **H1** → строка метаданных (авторы · год · тип · журнал) → `seoLead` (если есть) → CTA-кнопки.
- CTA: одна или несколько кнопок «Открыть PDF (RU/EN)» (primary, `target="_blank"`, порядок RU → EN); внешние источники показываются только если есть `externalLinks`. DOI выводится отдельной строчкой, без кнопки «Открыть в DOI».
- Контент: полный `abstract`, затем блок «Ключевые слова» (только при наличии `keywords`), затем «Как цитировать» (показываются только непустые поля `apa`/`gost`).
- Навигация: снизу всегда ссылка «← Все публикации» на `/det/publications` и постоянный блок «О проекте DETai» с кнопкой на `/det`.
- SEO: `<title>` формируется как `{title} — {первый автор}, {year} | DETai`; `<meta description>` берётся из `seoLead`, иначе из первых ~160 символов `abstract` с аккуратной обрезкой по предложению.
- Листы публикаций ведут только на `/det/publications/{slug}`; прямых ссылок на PDF или внешние источники из списка нет.

## Чек-лист для загрузки новой публикации
1. Добавить PDF в `public/documents/research/` с понятным названием, используя профильную папку:
   - статьи — `public/documents/research/articles/`;
   - тезисы — `public/documents/research/theses/`;
   - диссертации — `public/documents/research/dissertations/`.
2. Открыть PDF и извлечь:
   - полный текст аннотации (без сокращений);
   - ключевые слова, если выделены авторами;
   - рекомендованные форматы цитирования (APA/ГОСТ), если указаны.
3. В `publications.data.ts` создать запись `Publication`:
   - `slug`, `type`, `title`, `authors`, `year`, `journal?`;
   - `seoLead` — 1–2 предложения для SEO и верхнего блока страницы;
   - `abstract` — полный текст аннотации (скрытие только через CSS, без ленивой загрузки);
   - `keywords?` — массив строк или поле опустить, если их нет;
   - `citation?` — объект с `apa?`/`gost?`, только если в источнике есть точные формулировки;
   - `doi?` — строка формата `10.xxxx/xxxx` (показывается отдельной ссылкой, не как кнопка основного перехода);
   - `pdfs` — массив объектов `{ url, lang }` с путём к файлу в `public/documents/research/` (с учётом вложенной папки по типу, порядок RU → EN);
   - `externalLinks?` — массив ссылок вида `{ label, url }` без захардкоженных названий.
4. Убедиться, что `seoLead` заполнен вручную; если его нет, страница покажет только `abstract`, а meta description сгенерируется из аннотации.
5. Проверить, что все ссылки (`/det/publications/{slug}`) ведут на страницу статьи, а PDF открывается только из CTA.
6. Прогнать автопроверки при необходимости и зафиксировать изменения коммитом.

### Автообогащение диссертаций
- Для `type: "dissertation"` данные пробуют автоматически извлекаться из PDF (аннотация, ключевые слова, seoLead) через `pdf-parse`.
- Если файл большой/недоступен или извлечь текст не получилось — поля остаются пустыми либо помечаются `TODO`, приложение не падает.
- Для диссертаций закладывай два PDF (RU → EN) и проверяй, что кнопки отображаются обе.

## Тизеры публикаций

Тизерные блоки на страницах строятся по цепочке: `publications.base.ts` → `publications.data.ts` → `utils` → страницы/секции. Списки для тизера управляются только конфигурацией и не используют автоматическую выборку по дате.

- Конфиг избранных публикаций хранится отдельно в `publicationsTeaser.config.ts` и задаёт порядок slug'ов и лимиты для desktop/mobile.
- Компоненты секций читают готовые списки из конфига и утилит, не содержат бизнес-логики отбора и не дублируют данные публикаций.
- Автоматическая сортировка или выборка по дате в тизерах запрещены; порядок соответствует переданным slug'ам. Аналогичный подход используется для `projectsTeaserConfig`.

## Промт для добавления новой статьи (скопировать и отправлять агенту)
```
Ты GPT-5.1-Codex-Max и работаешь в репозитории detai-site. Проверь инструкции в AGENT.md.

Задача: добавить новую публикацию по стандарту SEO + UX v1.0.
- Открой PDF по пути <pdf_path> (если путь не дан — уточни в данных публикации) и извлеки полный abstract, keywords, форматы цитирования, основные ссылки.
- Добавь PDF в public/documents/research/ и пропиши точные `pdfs` (для диссертаций — два файла RU + EN).
- Обнови lib/publications/publications.data.ts по типу Publication: заполни slug, type, title, authors, year, journal?, seoLead (1–2 предложения, вручную), abstract (полностью), keywords?, citation?, pdfs, externalLinks?.
- Проверь, что список публикаций ведёт на /det/publications/{slug}, а CTA на странице статьи: «Открыть PDF (RU/EN)» + кнопки «Открыть в {label}» для внешних ссылок.
- Убедись, что meta title = "{title} — {первый автор}, {year} | DETai", meta description = seoLead или первые 160 символов abstract без обрыва на середине слова.
- Всегда оставляй блок с навигацией «← Все публикации» и «О концепции DET» внизу страницы.
- Используй Tailwind и текущую структуру компонентов, избегай захардкоженных названий источников.
- В конце обнови lib/publications/README.md, если меняешь правила, и сделай коммит с понятным описанием.
```

[⬅ Вернуться к основному README](../../README.md)
