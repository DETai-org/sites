import { notFound } from "next/navigation";
import { getBlogPostBySlug } from "../../../lib/blog/blog.utils";

interface BlogPostPageProps {
  params: {
    slug: string;
  };
}

export const runtime = "nodejs";

const postContentBySlug: Record<string, string> = {
  "eta-istoriya-pro-odnogo-cheloveka": `Эта история про одного человека, который очень хотел стать успешным в своём деле. Он подошел к одному известному мастеру и спросил: «Как стать таким же успешным как ты?» На что мастер ему ответил: «Я расскажу тебе свой секрет. Приходи завтра на пляж в 4 часа утра». Молодой человек очень сильно удивился и ответил: «Я не хочу плавать, я хочу чтобы у меня всё получалось». Мастер ответил: «Если ты действительно этого хочешь, встречаемся завтра в 4 часа утра»...............

1 этап. Утро наступило, парень приходит на пляж в деловом костюме, в ожидание что щас он узнает тайну. Мастер спрашивает: «Ты все еще хочешь стать успешным?»

Он ответил: «Очень сильно».

– «Тогда заходи в воду».

– "В воду? Но зачем? Я ведь в костюме"! Он пошел(80% здаются уже на этом этапе(я ведь в костюме, соц.статус) внутри его голос-ну всё зашёл в воду и хватит..................................................................

2 этап. Он шел, вода уже по пояс. Он остановился и говорит: «Давай завтра встретимся,я приду на пляж в плавках и мы пройдёмся по воде»(перенос дел на завтра) внутри его голос: ну всё хватит,завтра можно так сделать..............................

Он пошел(80% здаются уже на этом этапе(я ведь в костюме, соц.статус) внутри его голос-ну всё зашёл в воду и хватит..............................................................

3 этап. Мастер говорит: «Заходи в воду дальше»Воды было уже по грудь.Парень говорит-"Ну всё хватит на нас уже люди смотрят!"(выход из зоны комфотра,взгляды окружающих) внутри его голос: Что за глупость? Зачем это мне нужно?...............................................................................

4 этап. Мастер ведёт дальше ушли от берега уже далеко воды по шею.Человек говорит мастеру:"Ты сумашедший и что теперь? какого черта ты меня сюда привёл?"(злость,разочарование связанное с потерей веры в мастера) внутри его голос: всё это предел!!!............................................................................

5 этап. Мастер хватает парня за голову и начинает топить. Парень барахтается, царапается.(ВНЕЗАПНО ПРОПАДАЮТ ВСЕ СОМНЕНИЯ, НАСТУПАЕТ БЕЗРАЗЛИЧИЕ КО ВСЕМУ ЧТО БЫЛО В СКОБКАХ 1,2,3 и 4 ЭТАПА. ПРОПАДАЕТ УСТАЛОСТЬ И ТЫ ОСТАЁШЬСЯ ОДИН НА ОДИН С СЛАБОСТЬЮ (СТРАХОМ) внутри только голос "ТЫ ДОЛЖЕН ВЫЖИТЬ"! Только тогда ему удаётся вырваться и вдохнуть воздуха..................

........... Мастер ему говорит: Ты хотел знать как у меня всё получаеться? Так вот я тебе показал! Только борясь за себя, за свою жизнь ты становишься сильнее.Теперь ты знаешь мой секрет...

– «Когда ты был под водой, чего тебе хотелось больше всего?»

– «Жить».

И тогда мастер ответил: «КОГДА ТЫ ЗАХОЧЕШЬ ИМЕТЬ УСПЕХ ТАКЖЕ, КАК ТЫ ХОТЕЛ ЖИТЬ, ТОГДА ТЫ СТАНЕШЬ УСПЕШНЫМ!» Когда тебе не хватает воздуха, тебе все равно на остальные проблемы(что на тебе дорогой костюм,что люди на тебя смотрят,твой соц.статус и т.д.) Единственное что тебя беспокоило это выжать, вздохнуть чуть-чуть свежего воздуха. Больше ничего! И когда ты достигаешь той точки, когда ты захочешь успеха так же, как ты хотел дышать в даной ситуации, ты станешь успешным! Большинство из вас только говорят, что хотят стать успешными, но это слабое желание. Вы не хотите этого также, как вы хотите посмотреть телевизор, сходить на вечеринку и т.д. Вы не хотите успех также, как вы хотите спать.

И я здесь, чтобы сказать вам, что если вы хотите стать успешными, вы должны бороться. Все люди созданы одинаковыми, просто некоторые из них борьяться до конца!`,
};

export default function BlogPostPage({ params }: BlogPostPageProps) {
  const post = getBlogPostBySlug(params.slug);

  if (!post) {
    notFound();
  }

  const content = postContentBySlug[post.slug] ?? "";
  const paragraphs = content
    .split(/\n{2,}/)
    .map((paragraph) => paragraph.trim())
    .filter(Boolean);

  return (
    <main className="page">
      <article className="blog-post">
        <header className="blog-post__header">
          <p className="blog-post__meta">
            {new Date(post.publishedAt).toLocaleDateString("ru-RU")} · {post.author}
          </p>
          <h1 className="blog-post__title">{post.title}</h1>
          {post.coverImage ? (
            <img
              className="blog-post__image"
              src={post.coverImage.src}
              width={post.coverImage.width}
              height={post.coverImage.height}
              alt={post.coverImage.alt}
            />
          ) : null}
        </header>
        <div className="blog-post__content">
          {paragraphs.length ? (
            paragraphs.map((paragraph, index) => <p key={index}>{paragraph}</p>)
          ) : (
            <p>Контент скоро появится.</p>
          )}
        </div>
      </article>
    </main>
  );
}
